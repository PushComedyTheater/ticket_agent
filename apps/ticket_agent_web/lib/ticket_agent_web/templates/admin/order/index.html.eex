<div class="box">
  <div class="box-header with-border">
    <h3 class="box-title">Orders</h3>
    <div class="box-tools">
      <div class="input-group input-group-sm" style="width: 150px;">
        <input type="text" id="table_search" name="table_search" class="form-control pull-right" placeholder="Search">
        <div class="input-group-btn">
          <button id="btn_search" type="submit" class="btn btn-default"><i class="fa fa-search"></i></button>
        </div>
      </div>
    </div>
  </div>
  <!-- /.box-header -->
  <div class="box-body">
    <table id="datatable" class="table table-bordered table-striped">
      <thead>
        <tr>
          <th></th>
          <th>Buyer</th>
          <th>Listing</th>
          <th>Ticket Count</th>
          <th>Status</th>
          <th>Total</th>
          <th>Started</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
  </div>

<!-- /.box-body -->
</div>
<script type="text/javascript">
  $( document ).ready(function(){
    window.table = $('#datatable').DataTable( {
      ajax: {
        url: "/admin/orders.json"
      },
      processing: true,
      serverSide: true,
      pageLength: 10,
    columns: [
      {
        data: "id",
        fnCreatedCell: function (nTd, sData, oData, iRow, iCol) {
          $(nTd).html("<span><a href=\"/admin/orders/"+oData.slug+"\" class=\"btn btn-info btn-xs\">Show</a></span>");
        }
      },
      { data: "buyer" },
      { data: "listing" },
      { data: "ticket_count"},
      { data: "status"},
      {
        data: "total",
        fnCreatedCell: function (nTd, sData, oData, iRow, iCol) {
          $(nTd).html("$" + sData);
        }
      },
      { data: "date"}
    ]
    } );
  });

</script>
