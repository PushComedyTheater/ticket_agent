<%= form_for @changeset, admin_event_path(@conn, :create), [as: :listing], fn f -> %>
<%= hidden_input f, :class_id %>
  <div class="box box-primary">
    <div class="box-header with-border">
      <h3 class="box-title">New Class From <%= @class.title %></h3>
    </div>
    <!-- /.box-body -->
    <div class="box-body">
      <div class="row form-group">
        <div class="col-sm-2"><%= label f, :title, class: "control-label", placeholder: "Make it short and catchy" %></div>
        <div class="col-sm-10">
        <%= text_input f, :title, class: "form-control" %>
        <%= error_tag f, :title %>
        </div>
      </div>
      <div class="row form-group">
        <div class="col-sm-2"><%= label f, :description, class: "control-label" %></div>
        <div class="col-sm-10">
        <%= textarea(f, :description, class: "ckeditor", cols: 80, rows: 10) %>
        <%= error_tag f, :description %>
        </div>
      </div>    

      <div class="row form-group">
        <div class="col-sm-2"><%= label f, :tags, class: "control-label" %></div>
        <div class="col-sm-10">
        <input type="text" id="tags" name="tags" placeholder="Comma Separated List Of Tags (e.g. improv, first-timers)" class="form-control">
        <small>Any spaces will be converted into dashes</small>
        </div>
      </div>
    </div>
  </div>        
     

  <div class="box box-primary">
    <div class="box-header with-border">
      <h3 class="box-title">When and where is your event?</h3>
    </div>
    <!-- /.box-body -->
    <div class="box-body">
      <div class="row form-group">
        <div class="col-sm-2"><label class="control-label" for="listing_start_time">Start time</label></div>
        <div class="col-sm-10">
          <div class="input-group">
            <div class="input-group-addon">
              <i class="fa fa-clock-o"></i>
            </div>
            <input type="text" class="form-control pull-right" id="start_time">
          </div>        
        </div>
      </div>            
    </div>
  </div>

  <div class="box box-primary">
    <div class="box-header with-border">
      <h3 class="box-title">Listing Images</h3>
    </div>
    <!-- /.box-body -->
    <div class="box-body">
      <div class="row">
        <div class="col-sm-4">Event Image</div>
        <div class="col-sm-4">
          <img id="cover_image" src="<%= @class.image_url %>" style="zoom: 50%; padding: 5px;" /><br /><br />
          <a href="#" id="upload_cover_photo" class="btn btn-primary">
            Upload Photo
          </a>
          <a href="#" id="choose_cover_photo" class="btn btn-primary">
            Choose Existing Photo
          </a>
          <!-- Button trigger modal -->
        </div>
      </div>
    </div>
  </div>   

  <div class="box box-primary">
    <div class="box-header with-border">
      <h3 class="box-title">Tickets</h3>
    </div>
    <!-- /.box-body -->
    <div class="box-body">
      <div class="row">
        <div class="col-sm-12">
        <button id="add_paid_ticket" class="btn btn-block btn-primary btn-lg">Add Ticket</button>
        </div>
      </div>
    </div>
  </div>          
<% end %>

<script type="text/javascript">
  $(function () {
    $('#start_time').daterangepicker({ timePicker: true, timePickerIncrement: 30, locale: {
            format: 'MM/DD/YYYY h:mm A'
        } });

$('#start_time').on('apply.daterangepicker', function(ev, picker) {
  console.log(picker.startDate);
  console.log(picker.endDate);
  console.log(picker.startDate.format('MM/DD/YYYY h:mm A'));
  console.log(picker.endDate.format('MM/DD/YYYY h:mm A'));
});    
  });
</script>